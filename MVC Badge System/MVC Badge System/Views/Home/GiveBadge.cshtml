@model MVC_Badge_System.Models.User

@{

    ViewBag.Title = "GiveBadge";
    List<MVC_Badge_System.Models.Badge> badges = new List<MVC_Badge_System.Models.Badge>();

    badges = MVC_Badge_System.Db.Db.GetBadges(Model);

}

<center>
    <div id="Give Badge">

        <h3>Give Badge</h3>
    </div>
    <form role="form" action="/Home/Confirmation" method="post">
        <!--May need to change path-->
        @*<p style="padding-left: 15%; border:1px solid black;">*@
        <div class="form-group">
            <label for="recipient" class="col-sm-2 control-label">Name:</label>
            <!--To get the student's user ID in the database, you can call window.SearchModule.getSelectedUserID($('#recipient'))
                If you want something to happen after a student is selected, you can call window.SearchModule.setSelectHandler('recipient', function(id) { ... })
                -->
            @*This needs to be a user not a string*@
            <div class="gst-studentsearch" id="recipient">
                <input name="recepient" type="search" list="user_list" placeholder="Search..." required />
                <datalist id="user_list" class="gst-ss-results">
                    <!--Holds the dropdown generated by SearchResult.cshtml-->
                </datalist>
            </div>
            <input type="hidden" name="recepientid" id="recepientid"/>

        </div>

        @{ 

        }


        <div class="form-group">
            <label for="name" class="col-sm-2 control-label">Select a Badge:</label>

            <select name="badgeid" class="form-control">
               
      @{
          foreach (var badge in badges)
          {
            <option value="@badge.BadgeId">@badge.Name</option>
          }
    }
            </select>
        </div>

        <div class="form-group">
            <label for="comment" class="col-sm-2 control-label">Comment:</label>
            <textarea name="comment" class="form-control" rows="3" required></textarea>
        </div>
        <div class="form-group"><p class="col-sm-2 control-label"> <button type="submit" class="btn btn-default" href="">Submit</button> </p></div>
    </form>
</center>

@section scriptsIncludes{ 
    <script src="~/content/SearchModule.js?Build=@Guid.NewGuid().ToString()"></script>


<script type="text/javascript">
			$(document).ready(function () {
			    window.SearchModule.init();
			    window.SearchModule.setSelectHandler('recipient', onSelect);
			});

			function onSelect(studentId) {
			    $("#recepientid").val(studentId);
				
			}
</script>
}

@*@{
    @Html.DisplayNameFor(model => model.name)

        ViewBag.Title = "About";
    }
    <h2>@ViewBag.Title.</h2>
    <h3>@ViewBag.Message</h3>

    <p>Use this area to provide additional information.</p>*@